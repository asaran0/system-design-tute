Great â€” **Day 15â€“16: System Design Basics** is *mandatory* for a **Google Senior (L5/L6)** interview.
Iâ€™ll explain **each concept in depth**, with:

* ğŸ“Œ **What it is**
* ğŸ§  **Why it exists**
* âš™ï¸ **How it works**
* ğŸ—ï¸ **How to implement in a production system**
* ğŸ§ª **Real-world examples (Google / large-scale systems)**
* âš ï¸ **Trade-offs & interview tips**

---

# ğŸ—ï¸ DAY 15â€“16: SYSTEM DESIGN BASICS (IN DEPTH)

---

## 1ï¸âƒ£ LOAD BALANCERS

---

### ğŸ“Œ What is a Load Balancer?

A **load balancer (LB)** distributes incoming traffic across multiple backend servers to:

* Improve **availability**
* Improve **scalability**
* Prevent **overloading**

---

### ğŸ§  Why Load Balancers Are Needed

Without LB:

* Single server = SPOF (Single Point of Failure)
* Limited throughput
* Poor reliability

With LB:

* Horizontal scaling
* Fault tolerance
* Smooth traffic spikes

---

### âš™ï¸ How Load Balancers Work

```
Client â†’ Load Balancer â†’ Server Pool
```

LB decides **which server** gets the request.

---

### ğŸ” Load Balancing Algorithms

| Algorithm          | When to Use               |
| ------------------ | ------------------------- |
| Round Robin        | Equal servers             |
| Least Connections  | Long-lived connections    |
| Weighted RR        | Different server capacity |
| IP Hash            | Session stickiness        |
| Consistent Hashing | Cache-heavy systems       |

---

### ğŸ—ï¸ Production Implementation

#### L4 Load Balancer (Transport Level)

* TCP/UDP
* Faster, less intelligent
* Example: **AWS NLB**

#### L7 Load Balancer (Application Level)

* HTTP/HTTPS aware
* Can route based on URL, headers
* Example: **Nginx, Envoy, AWS ALB**

---

### ğŸ§ª Example: Google Search Frontend

```
User â†’ Global DNS â†’ Geo Load Balancer â†’ Regional LB â†’ App Servers
```

---

### âš ï¸ Trade-offs

| Benefit           | Cost                 |
| ----------------- | -------------------- |
| High availability | Extra hop latency    |
| Scalability       | LB itself must be HA |

---

### ğŸ¯ Interview Tip

> â€œIâ€™d use L7 LB if I need routing or auth, L4 if I need raw performance.â€

---

## 2ï¸âƒ£ CACHING (Redis / Memcached)

---

### ğŸ“Œ What is Caching?

Caching stores **frequently accessed data** in fast storage to reduce:

* Latency
* Database load
* Cost

---

### ğŸ§  Why Caching?

Database is:

* Slow
* Expensive
* Limited in scale

Cache is:

* In-memory
* Extremely fast
* Cheap reads

---

### âš™ï¸ How Caching Works

```
Client â†’ Cache â†’ DB
```

---

### ğŸ” Cache Access Patterns

| Pattern       | Use Case              |
| ------------- | --------------------- |
| Read-Through  | Transparent cache     |
| Write-Through | Strong consistency    |
| Write-Behind  | High write throughput |
| Cache-Aside   | Most common           |

---

### ğŸ—ï¸ Production Implementation (Cache-Aside)

```text
1. Read from cache
2. If miss â†’ read DB
3. Update cache
```

---

### ğŸ§ª Redis vs Memcached

| Feature     | Redis   | Memcached      |
| ----------- | ------- | -------------- |
| Persistence | Yes     | No             |
| Data types  | Rich    | Simple         |
| Replication | Yes     | No             |
| Use case    | Complex | Simple caching |

---

### âš ï¸ Cache Invalidation (HARD PART)

Strategies:

* TTL
* Write-through
* Event-based invalidation

---

### ğŸ¯ Interview Tip

> â€œCache invalidation and consistency are the hardest problems.â€

---

## 3ï¸âƒ£ SHARDING & PARTITIONING

---

### ğŸ“Œ What is Sharding?

Splitting large datasets across multiple databases.

---

### ğŸ§  Why Sharding?

* Single DB hits limits
* Vertical scaling doesnâ€™t scale infinitely

---

### âš™ï¸ Sharding Strategies

| Strategy    | Pros        | Cons              |
| ----------- | ----------- | ----------------- |
| Range-based | Simple      | Hot shards        |
| Hash-based  | Uniform     | Hard to rebalance |
| Geo-based   | Low latency | Complex queries   |

---

### ğŸ—ï¸ Production Implementation

#### Example: User Table Sharding

```
shard_id = hash(user_id) % N
```

---

### ğŸ§ª Google Example

* Spanner uses **automatic sharding**
* Bigtable uses **tablet splitting**

---

### âš ï¸ Problems

* Cross-shard joins
* Rebalancing
* Hot keys

---

### ğŸ¯ Interview Tip

> â€œIâ€™d prefer consistent hashing to minimize reshuffling.â€

---

## 4ï¸âƒ£ CAP THEOREM

---

### ğŸ“Œ CAP Definition

In distributed systems, you can choose **only 2**:

* **Consistency**
* **Availability**
* **Partition Tolerance**

---

### ğŸ§  Why CAP Exists

Network partitions are unavoidable.

---

### âš™ï¸ CAP Choices

| Type | Example             |
| ---- | ------------------- |
| CP   | HBase, Zookeeper    |
| AP   | Cassandra, DynamoDB |
| CA   | Single-node DB      |

---

### ğŸ§ª Real Example

* Payment system â†’ **CP**
* Social feed â†’ **AP**

---

### ğŸ¯ Interview Tip

> â€œPartition tolerance is non-negotiable in distributed systems.â€

---

## 5ï¸âƒ£ CONSISTENCY MODELS

---

### ğŸ“Œ What is Consistency?

Rules governing **what data a read returns** after a write.

---

### ğŸ” Types of Consistency

| Model            | Meaning              |
| ---------------- | -------------------- |
| Strong           | Read always latest   |
| Eventual         | Converges eventually |
| Read-your-writes | Session-based        |
| Monotonic reads  | No going backward    |

---

### ğŸ—ï¸ Production Implementation

#### Strong Consistency

* Leader-based replication
* Synchronous writes

#### Eventual Consistency

* Async replication
* Conflict resolution

---

### ğŸ§ª Example

* Google Docs â†’ Strong
* Instagram likes â†’ Eventual

---

### ğŸ¯ Interview Tip

> â€œConsistency depends on user expectations.â€

---

## 6ï¸âƒ£ PUTTING IT ALL TOGETHER (REAL SYSTEM)

### Example: URL Shortener

```
User â†’ LB â†’ App Servers
        â†“
      Cache (Redis)
        â†“
   Sharded DB
```

* LB distributes traffic
* Cache handles hot URLs
* DB is sharded
* Eventual consistency acceptable

---

# ğŸ¯ WHAT GOOGLE EXPECTS YOU TO SAY

âœ” Correct terminology
âœ” Trade-offs clearly
âœ” Real-world examples
âœ” Operational awareness

---

## ğŸš€ NEXT STEPS

1ï¸âƒ£ **End-to-end system design mock (Google style)**
2ï¸âƒ£ **Design YouTube / Google Drive / WhatsApp**
3ï¸âƒ£ **Behavioral + Googleyness**
4ï¸âƒ£ **Senior-level system design cheatsheet**

Tell me what you want next ğŸ”¥
